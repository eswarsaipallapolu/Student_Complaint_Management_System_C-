<UserControl x:Class="StudentComplaintSystem.Views.HomeView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:local="clr-namespace:StudentComplaintSystem.ViewModels"
             xmlns:converters="clr-namespace:StudentComplaintSystem.Converters"
             mc:Ignorable="d"
             d:DesignHeight="450" d:DesignWidth="800">
    <UserControl.Resources>
        <!-- Override global styles with 25% increased sizes -->
        <Style x:Key="ButtonStyle" TargetType="Button" BasedOn="{StaticResource ButtonStyle}">
            <Setter Property="FontSize" Value="17.5"/>
            <Setter Property="Padding" Value="15,7.5"/>
            <Setter Property="Margin" Value="10"/>
        </Style>

        <Style x:Key="TextBoxStyle" TargetType="TextBox" BasedOn="{StaticResource TextBoxStyle}">
            <Setter Property="FontSize" Value="17.5"/>
            <Setter Property="Padding" Value="10"/>
            <Setter Property="Margin" Value="10"/>
        </Style>

        <Style x:Key="PasswordBoxStyle" TargetType="PasswordBox" BasedOn="{StaticResource PasswordBoxStyle}">
            <Setter Property="FontSize" Value="17.5"/>
            <Setter Property="Padding" Value="10"/>
            <Setter Property="Margin" Value="10"/>
        </Style>

        <Style x:Key="HeadingStyle" TargetType="TextBlock" BasedOn="{StaticResource HeadingStyle}">
            <Setter Property="FontSize" Value="25"/>
            <Setter Property="Margin" Value="0,0,0,25"/>
        </Style>

        <Style x:Key="LabelStyle" TargetType="TextBlock" BasedOn="{StaticResource LabelStyle}">
            <Setter Property="FontSize" Value="17.5"/>
            <Setter Property="Margin" Value="10"/>
        </Style>

        <Style x:Key="CardStyle" TargetType="Border" BasedOn="{StaticResource CardStyle}">
            <Setter Property="Padding" Value="25"/>
            <Style.Triggers>
                <Trigger Property="IsVisible" Value="True">
                    <Setter Property="Opacity" Value="0"/>
                    <Trigger.EnterActions>
                        <BeginStoryboard>
                            <Storyboard>
                                <DoubleAnimation Storyboard.TargetProperty="Opacity"
                                                 From="0" To="1" Duration="0:0:0.5"/>
                            </Storyboard>
                        </BeginStoryboard>
                    </Trigger.EnterActions>
                </Trigger>
            </Style.Triggers>
        </Style>
    </UserControl.Resources>

    <Grid Background="{DynamicResource HomePageBackground}">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <Border Grid.Row="0" Background="{DynamicResource PrimaryColor}" Padding="15">
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                <!-- Logo -->
                <Canvas Width="62.5" Height="62.5" Margin="0,0,25,0">
                    <!-- Speech Bubble -->
                    <Path Fill="White" Data="M50,20 A30,30 0 1,1 0,20 L25,45 Z"/>
                    <!-- Graduation Cap -->
                    <Path Fill="White" Data="M10,5 H30 L25,10 H15 Z M20,5 V0"/>
                    <!-- Checkmark -->
                    <Path Fill="#3B82F6" Data="M15,20 L20,25 L30,15"/>
                    <!-- Text: SCMS -->
                    <TextBlock Text="SCMS" 
                               FontSize="12.5"
                               FontWeight="Bold" 
                               Foreground="White" 
                               FontFamily="Segoe UI" 
                               Canvas.Left="15" 
                               Canvas.Top="45"/>
                </Canvas>
                <TextBlock Text="Student Complaint System" 
                           FontSize="33" 
                           FontWeight="Bold" 
                           Foreground="White"/>
            </StackPanel>
        </Border>

        <!-- Main content -->
        <StackPanel Grid.Row="1" HorizontalAlignment="Center" VerticalAlignment="Center">
            <!-- Role selection -->
            <Border Style="{StaticResource CardStyle}"
                    Visibility="{Binding IsRoleSelected, Converter={StaticResource InverseBooleanToVisibilityConverter}, ConverterParameter=Inverse}">
                <StackPanel>
                    <TextBlock Text="Select Your Role" 
                               Style="{StaticResource HeadingStyle}"/>
                    <Button Content="Student" 
                            Command="{Binding SelectRoleCommand}" 
                            CommandParameter="Student" 
                            Style="{StaticResource ButtonStyle}"/>
                    <Button Content="Admin" 
                            Command="{Binding SelectRoleCommand}" 
                            CommandParameter="Admin" 
                            Style="{StaticResource ButtonStyle}"/>
                </StackPanel>
            </Border>

            <!-- Login form -->
            <Border Style="{StaticResource CardStyle}"
                    Visibility="{Binding IsRoleSelected, Converter={StaticResource BooleanToVisibilityConverter}}">
                <StackPanel>
                    <TextBlock Text="{Binding SelectedRole, StringFormat='Login as {0}'}" 
                               Style="{StaticResource HeadingStyle}"/>
                    <TextBlock Text="ID" Style="{StaticResource LabelStyle}"/>
                    <TextBox Text="{Binding LoginId, UpdateSourceTrigger=PropertyChanged}" 
                             Style="{StaticResource TextBoxStyle}"/>
                    <TextBlock Text="Password" Style="{StaticResource LabelStyle}"/>
                    <PasswordBox x:Name="PasswordBox" 
                                 PasswordChanged="PasswordBox_PasswordChanged" 
                                 Style="{StaticResource PasswordBoxStyle}"/>
                    <TextBlock Text="Invalid ID or Password" 
                               Foreground="{DynamicResource ErrorColor}" 
                               Margin="12.5,6.25" 
                               FontSize="17.5" 
                               Visibility="{Binding IsLoginFailed, Converter={StaticResource BooleanToVisibilityConverter}}"/>
                    <Button Content="Login" 
                            Command="{Binding LoginCommand}" 
                            Style="{StaticResource ButtonStyle}"/>
                    <Button Content="Back" 
                            Command="{Binding BackCommand}" 
                            Style="{StaticResource ButtonStyle}"/>
                </StackPanel>
            </Border>
        </StackPanel>
    </Grid>
</UserControl>